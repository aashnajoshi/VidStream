{% extends 'base.html' %}
{% block title %}Search Results{% endblock title %}

{% block content %}
<h3 class="d-flex align-items-center justify-content-center mt-2">Search Results for "{{ query }}"</h3>

{% if streams %}
{% for stream in streams %}
<div class="card mb-3">
    <img src="{{ stream.cover_image.url }}" class="card-img-top" alt="{{ stream.title }}">
    <div class="card-body">
        <h5 class="card-title">{{ stream.title }}</h5>
        <p class="card-text"><strong>Genre:</strong> {{ stream.genre }}</p>
        <p class="card-text">{{ stream.description|slice:":100" }}...</p>
        <a href="#" class="btn btn-outline-dark">Watch Now</a>
    </div>
</div>
{% endfor %}

<!-- Pagination Controls -->
{% if streams.has_other_pages %}
<nav aria-label="Page navigation">
    <ul class="pagination">
        <li class="page-item{% if streams.number == 1 %} disabled{% endif %}">
            <a class="page-link" href="?page={{ streams.previous_page_number }}" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>
        {% for page in streams.paginator.page_range %}
        {% if page == streams.number %}
        <li class="page-item active"><span class="page-link">{{ page }}</span></li>
        {% elif page >= streams.number|add:'-3' and page <= streams.number|add:'3' %} <li class="page-item"><a
                class="page-link" href="?q={{ query }}&page={{ page }}">{{ page }}</a></li>
            {% elif page == streams.paginator.num_pages %}
            <li class="page-item"><a class="page-link" href="?q={{ query }}&page={{ page }}">{{ page }}</a></li>
            {% elif page == streams.number|add:'-3' or page == streams.number|add:'3' %}
            <li class="page-item disabled"><span class="page-link">...</span></li>
            {% endif %}
            {% endfor %}
            <li class="page-item{% if streams.number == streams.paginator.num_pages %} disabled{% endif %}">
                <a class="page-link" href="?page={{ streams.next_page_number }}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
    </ul>
</nav>
{% endif %}
{% else %}
<p>No videos found for your search query.</p>
{% endif %}

{% endblock content %}